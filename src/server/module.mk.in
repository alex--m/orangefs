DIR := src/server

# automatically generated c files
SERVERGENSRC := \
	$(DIR)/lookup.src.c \
	$(DIR)/create.src.c \
	$(DIR)/crdirent.src.c \
	$(DIR)/set-attr.src.c \
	$(DIR)/mkdir.src.c \
	$(DIR)/get-attr.src.c \
	$(DIR)/readdir.src.c \
	$(DIR)/get-config.src.c 

# "normal" c files
SERVERSRC += \
	$(DIR)/memory-cache.c \
	$(DIR)/server-config.c \
	$(DIR)/pvfs2-server.c \
	$(DIR)/state-machine.c \
	$(SERVERGENSRC)

# added to the library so that test programs will work
LIBSRC += \
	$(DIR)/print-struct.c

# rule for automatically generated source files
$(SERVERGENSRC): %.src.c: %.c src/common/statecomp/statecomp
	src/common/statecomp/statecomp -o $@ < $<
