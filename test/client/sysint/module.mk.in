DIR := test/client/sysint
TEST_JOBINT_DIR := src/io/job
TEST_SYSINT_DIR := test/client/sysint
TEST_REALSYSINT_DIR := src/client/unix-io

TEST_SYSINT_DIR_SRC += \
	$(DIR)/client.c\
	$(DIR)/lookup.c\
	$(DIR)/dcache-torture.c\
	$(DIR)/pcache-torture.c\
	$(DIR)/get-info.c\
	$(DIR)/mkdir.c\
	$(DIR)/remove.c\
	$(DIR)/rename.c\
	$(DIR)/find.c \
	$(DIR)/path-test.c\
	$(DIR)/create.c\
	$(DIR)/truncate.c\
	$(DIR)/readdir.c\
	$(DIR)/pcache-test.c\
	$(DIR)/test-pint-bucket.c \
	$(DIR)/test-pint-dcache.c \
	$(DIR)/io-test.c \
	$(DIR)/io-test-offset.c \
	$(DIR)/getparent.c

MISCSRC += \
	$(DIR)/helper.c

TESTSRC += $(TEST_SYSINT_DIR_SRC)

LOCALLIBS := -ldb -lrt -lpthread
LOCALTESTS := $(patsubst %.c,%, $(TEST_SYSINT_DIR_SRC))
$(LOCALTESTS): %: %.o $(TEST_JOBINT_DIR)/job.o $(TEST_REALSYSINT_DIR)/parse-pvfstab.o $(TEST_SYSINT_DIR)/helper.o
	$(LD) $< $(TEST_JOBINT_DIR)/job.o $(TEST_REALSYSINT_DIR)/parse-pvfstab.o $(TEST_SYSINT_DIR)/helper.o\
	$(LDFLAGS) $(LIBS) $(LOCALLIBS) -o $@

