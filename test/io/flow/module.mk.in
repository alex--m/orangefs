DIR := test/io/flow

TEST_IO_FLOW_DIR_SRC := \
	$(DIR)/test-harness-server.c\
	$(DIR)/test-harness-client.c\
	$(DIR)/test-harness-client-from-trove.c\
	$(DIR)/test-harness-server-trove.c\
	$(DIR)/wire-harness-server.c\
	$(DIR)/wire-harness-client.c

TESTSRC += $(TEST_IO_FLOW_DIR_SRC)

TEST_IO_FLOW_DIR_LOCALLIBS := -ldb -lrt -lpthread
LOCALTESTS := $(patsubst %.c,%, $(TEST_IO_FLOW_DIR_SRC))
$(LOCALTESTS): %: %.o
ifdef QUIET_COMPILE
	@echo "  LD		$@"
	@$(LD) $< $(LDFLAGS) $(LIBS) $(TEST_IO_FLOW_DIR_LOCALLIBS) -o $@
else
	$(LD) $< $(LDFLAGS) $(LIBS) $(TEST_IO_FLOW_DIR_LOCALLIBS) -o $@
endif

