<!DOCTYPE html>
<html>
  <head>
    <title>OrangeFS Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.42" />
<title>Client Administration :: OrangeFS Documentation</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

	<link href="/theme-flex/variant-blue.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "\/";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/windows-client/winclient_admin/">
    
      <header>
  <div class="logo">
    
	
  
    <a class="baselink" href="/">OrangeFS Documentation</a>
  

  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
</header>
<article>
  <aside>
    <ul class="menu">
    <li data-nav-id="/quickstart/" class="dd-item haschildren
        ">
      <div>
      <a href="/quickstart/">Quickstart Guides</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/quickstart/quickstart-package/" class="dd-item">
        <div>
          <a href="/quickstart/quickstart-package/">
            Quickstart Package Installation Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/quickstart/quickstart-build/" class="dd-item">
        <div>
          <a href="/quickstart/quickstart-build/">
            Quickstart Source Build Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/build-configure/" class="dd-item haschildren
        ">
      <div>
      <a href="/build-configure/">Build and Configure</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/build-configure/setup_security_build/" class="dd-item">
        <div>
          <a href="/build-configure/setup_security_build/">
            Build Security Setup
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/build-configure/build_orangefs/" class="dd-item">
        <div>
          <a href="/build-configure/build_orangefs/">
            Build OrangeFS
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/build-configure/configuring_ldap_for_identity_mapping/" class="dd-item">
        <div>
          <a href="/build-configure/configuring_ldap_for_identity_mapping/">
            Configure LDAP
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/build-configure/create_orangefs_configuration_file/" class="dd-item">
        <div>
          <a href="/build-configure/create_orangefs_configuration_file/">
            OrangeFS Config File
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/build-configure/results_of_build_and_configure/" class="dd-item">
        <div>
          <a href="/build-configure/results_of_build_and_configure/">
            Results
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/add-servers/" class="dd-item haschildren
        ">
      <div>
      <a href="/add-servers/">Add Server(s)</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/add-servers/copy_ofs_install_directory_servers/" class="dd-item">
        <div>
          <a href="/add-servers/copy_ofs_install_directory_servers/">
            Copy OrangeFS Server Installation Directory
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/add-servers/set_up_security_servers/" class="dd-item">
        <div>
          <a href="/add-servers/set_up_security_servers/">
            Set up Server Security
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/add-servers/server-startup/" class="dd-item">
        <div>
          <a href="/add-servers/server-startup/">
            Server Startup
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/add-servers/results_of_add_servers/" class="dd-item">
        <div>
          <a href="/add-servers/results_of_add_servers/">
            Add Server(s) Results
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/nix-clients/" class="dd-item haschildren
        ">
      <div>
      <a href="/nix-clients/">OrangeFS Clients</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/nix-clients/pvfs2tab-file/" class="dd-item">
        <div>
          <a href="/nix-clients/pvfs2tab-file/">
            pvfs2tab
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/nix-clients/linux-kernel-module/" class="dd-item">
        <div>
          <a href="/nix-clients/linux-kernel-module/">
            Linux Kernel Module
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/nix-clients/direct-interface/" class="dd-item">
        <div>
          <a href="/nix-clients/direct-interface/">
            Linux Direct Interface
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/nix-clients/romio-interface/" class="dd-item">
        <div>
          <a href="/nix-clients/romio-interface/">
            Linux ROMIO MPI Interface
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/nix-clients/advanced-linux-client-security/" class="dd-item">
        <div>
          <a href="/nix-clients/advanced-linux-client-security/">
            Linux Client Advanced Security Modes
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/nix-clients/fuse-client/" class="dd-item">
        <div>
          <a href="/nix-clients/fuse-client/">
            FUSE Client
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/nix-clients/hadoop_installation/" class="dd-item">
        <div>
          <a href="/nix-clients/hadoop_installation/">
            Hadoop Client
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/windows-client/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/windows-client/">Windows Client</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/windows-client/preparing_for_installation_windows/" class="dd-item">
        <div>
          <a href="/windows-client/preparing_for_installation_windows/">
            Preparing for Windows Installation
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/windows-client/what_to_expect_windows/" class="dd-item">
        <div>
          <a href="/windows-client/what_to_expect_windows/">
            What to Expect
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/windows-client/running_the_installation_program_windows/" class="dd-item">
        <div>
          <a href="/windows-client/running_the_installation_program_windows/">
            Installing the Software
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/windows-client/manual_installation_windows/" class="dd-item">
        <div>
          <a href="/windows-client/manual_installation_windows/">
            Manual Installation
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/windows-client/uninstalling_the_client_windows/" class="dd-item">
        <div>
          <a href="/windows-client/uninstalling_the_client_windows/">
            Uninstalling the Windows client
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/windows-client/winclient_use/" class="dd-item">
        <div>
          <a href="/windows-client/winclient_use/">
            Using the Client
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/windows-client/winclient_admin/" class="dd-item active">
        <div>
          <a href="/windows-client/winclient_admin/">
            Client Administration
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/configuration/" class="dd-item haschildren
        ">
      <div>
      <a href="/configuration/">OrangeFS Configuration</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/configuration/admin_ofs_configuration_file/" class="dd-item">
        <div>
          <a href="/configuration/admin_ofs_configuration_file/">
            OrangeFS Configuration File
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/configuration/orangefs_advanced_configuration/" class="dd-item">
        <div>
          <a href="/configuration/orangefs_advanced_configuration/">
            Multiple File Systems
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/configuration/multiple_server_processes/" class="dd-item">
        <div>
          <a href="/configuration/multiple_server_processes/">
            Multiple Server Processes
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/quickstart/" >
   Quickstart Guides</option>
    <option value="/build-configure/" >
   Build and Configure</option>
    <option value="/add-servers/" >
   Add Server(s)</option>
    <option value="/nix-clients/" >
   OrangeFS Clients</option>
    <option value="/windows-client/" >
   Windows Client</option> 
      <option value="/windows-client/preparing_for_installation_windows/" >- Preparing for Windows Installation</option>
      <option value="/windows-client/what_to_expect_windows/" >- What to Expect</option>
      <option value="/windows-client/running_the_installation_program_windows/" >- Installing the Software</option>
      <option value="/windows-client/manual_installation_windows/" >- Manual Installation</option>
      <option value="/windows-client/uninstalling_the_client_windows/" >- Uninstalling the Windows client</option>
      <option value="/windows-client/winclient_use/" >- Using the Client</option>
      <option value="/windows-client/winclient_admin/"  selected>- Client Administration</option>
  
    <option value="/configuration/" >
   OrangeFS Configuration</option>



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/js/lunr.min.js"></script>
        <script type="text/javascript" src="/js/auto-complete.js"></script>
        <link href="/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "\/";
          
        </script>
        <script type="text/javascript" src="/js/search.js"></script>
      </div>
    

    <h1>Client Administration</h1>
    
    
    
    

<p>Information in this topic includes:</p>

<ul>
<li><a href="#Configuration">Configuration</a></li>
<li><a href="WinClient_Admin.htm#Configuring_the_Client_Security_Mode">Configuring the Client Security
Mode</a></li>
<li><a href="#User_Mapping">User Mapping</a></li>
<li><a href="#Notes_on_Installing_Globus_Toolkit">Installing and Using Globus
Toolkit</a> (certificates only)</li>
<li><a href="#Troubleshooting">Troubleshooting</a></li>
<li><a href="#Source_Code">Source Code</a></li>
</ul>

<h2 id="configuration">Configuration</h2>

<p>Two configuration files exist for the OrangeFS Client:</p>

<ul>
<li>orangefstab</li>
<li>orangefs.cfg</li>
</ul>

<p> </p>

<p>Both text files are located in the installation directory
(C:\OrangeFS\Client) by default and can be edited.</p>

<p>The orangefstab file contains only one line entry, which is the URI
address of the OrangeFS server to be mounted for Windows Client access.</p>

<p>The orangefs.cfg file can contain a wide range of settings, including:</p>

<ul>
<li>The drive letter on your Windows system that is associated with
OrangeFS</li>
<li>The user mapping option your client is configured for (list,
certificate, ldap)</li>
<li>Various additional settings for each of the user mapping options</li>
<li>Debug settings for logging and troubleshooting  </li>
</ul>

<p> </p>

<p><strong>Note     </strong>Because the configuration files can be altered to change
security information, only administrative users should have access to
change them. For security information, see your Windows documentation.</p>

<p> </p>

<h3 id="working-with-the-orangefstab-file">Working with the orangefstab File</h3>

<p>The orangefstab file uses the same format as Linux/UNIX mtab (mounted
file system table) files. Here is a sample line entry in orangefstab:</p>

<p>tcp://orangefs.acme.com:3334/orangefs /mnt/orangefs pvfs2
defaults,noauto 0 0</p>

<ul>
<li>Since only one file system can be mounted, only one line can be
used.</li>
<li>The first field is a URI that specifies an OrangeFS file system
server. The format is:</li>
</ul>

<p>tcp://<em>hostname</em>:<em>port</em>/fs<em>_name</em></p>

<p>where&hellip;</p>

<p><em>hostname</em> = OrangeFS server host name</p>

<p><em>port</em> = port number</p>

<p><em>fs_name</em> = OrangeFS installation name</p>

<p>TCP is the only protocol supported on Windows. The default port is 3334.
The file system name can be determined from the server configuration
file (default is orangefs).</p>

<ul>
<li>The second field is the internal UNIX-style mount point. This value
should be the same for all clients (Windows or Linux/UNIX). The
other fields should be left as-is above.</li>
</ul>

<p> </p>

<h3 id="working-with-the-orangefs-cfg-file">Working with the orangefs.cfg File</h3>

<p>Most of the Windows Client configuration information is contained in
orangefs.cfg, a text file that contains lines in the form:</p>

<p><em>keyword</em> <em>option_value</em></p>

<p>You can specify comments using the # character:</p>

<p># This is a comment.</p>

<p> </p>

<h4 id="keyword-mount-normal-indent-1">Keyword: mount {.normal_indent_1}</h4>

<p>The first essential keyword is mount. It specifies the drive letter
associated with the mounted OrangeFS server.</p>

<p>Example:</p>

<p>mount O:</p>

<p>This example will mount the file system on O: drive. (You must include
the colon.) If you do not use the mount keyword, the first
alphabetically available drive, starting with E:, is used by default.</p>

<p> </p>

<h4 id="keyword-user-mode-emphasis">Keyword: user-mode {.emphasis}</h4>

<p>The user-mode keyword sets the user mapping mode. The Client will not
start if it is not included in the file. The option value must be list,
certificate or LDAP.</p>

<p>Example:</p>

<p>user-mode list</p>

<p><strong>Note     </strong>The user-mode keyword is at the top level of a hierarchy of
keywords for configuring user mapping, discussed in more detail in the
next section.</p>

<p> </p>

<h4 id="keywords-new-file-perms-new-dir-perms">Keywords: new-file-perms, new-dir-perms</h4>

<p>The new-file-perms and new-dir-perms keywords change the initial
permissions mask of newly created files and directories. If these
keywords are not present, the default permissions mask is 755
(rwxr-xr-x).</p>

<p><strong>Note     </strong>For more information about the permissions mask, see the
Linux/UNIX chmod man page.</p>

<p>The keywords are used with an octal integer value representing the
permissions mask.</p>

<p>Examples:</p>

<p>new-file-perms 644<br />
 new-dir-perms 700</p>

<p>The first example will cause new files to be created with “rw-r&ndash;r&ndash;“
permissions.</p>

<p>The second will create directories with “rwx&mdash;&mdash;“ permissions.</p>

<p><strong>Note     </strong>While you can set the “sticky bit” in OrangeFS, it has no
effect.</p>

<p><strong>Important  </strong>Ensure that the file owners always have read permissions
to their own files (mask 400), and read and execute permissions to their
own directories (mask 500). Otherwise, they cannot read these files and
directories after creation.</p>

<p> </p>

<h4 id="keywords-debug-debug-file-debug-stderr">Keywords: debug, debug-file, debug-stderr</h4>

<p>The debug, debug-file and debug-stderr keywords log detailed debugging
information. If you specify the debug keyword by itself, client-related
messages are recorded in orangefs.log in the installation directory
(C:\OrangeFS\Client by default). You can change the name and location
of the log file by using the debug-file keyword.</p>

<p>Example:</p>

<p>debug-file C:\Temp\myfile.log</p>

<p>You can also use any of the debugging flags available with OrangeFS. For
a list of these flags, see the OrangeFS system documentation. The client
flag is win_client.</p>

<p>Example:</p>

<p>debug win_client io msgpair</p>

<p>In this example, you would log debugging information about the client,
I/O and message pair operations.</p>

<p>The debug-stderr keyword is used with no option value and prints
debugging messages to the console. This keyword is useful only if
orangefs-client.exe is running as a normal executable (not as a
service).</p>

<h4 id="keywords-table">Keywords Table</h4>

<p>Following is a list of all keywords available for use in the
orangefs.cfg file.</p>

<table>
<thead>
<tr>
<th>Keyword</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>mount</td>
<td>Sets the Windows drive letter to represent the OrangeFS file system.</td>
</tr>

<tr>
<td>user-mode</td>
<td>Sets the authentication/security mode used to map Windows user accounts with OrangeFS user accounts. Three possible option values:  <br> <strong>- list:</strong> This mode directly matches one Windows ID with one OrangeFS UID and primary GID.   <br>  <strong>- certificate:</strong> This mode maps digital certificates to OrangeFS UID/GID   <br>  <strong>- ldap:</strong> This mode enables Windows user ID to be looked up in an identity directory that supports LDAP. Examples: Active Directory, eDirectory, Open LDAP.</td>
</tr>

<tr>
<td>user</td>
<td>Used only when value for user-mode keyword is list. <br> <br> Specifies a user. A separate line entry with this keyword is required for each user. Each time it is used, you must enter it in a line that occurs below the user-mode keyword line.</td>
</tr>

<tr>
<td>ca-path</td>
<td>Used only when value for user-mode keyword is certificate. <br> <br> Sets path to file for CA (Certificate Authority) certificate. If you use this keyword, you must enter it in a line that occurs below the user-mode keyword line.</td>
</tr>

<tr>
<td>cert-dir-prefix</td>
<td>Used only when value for user-mode keyword is certificate. <br> <br> Sets the location of your user and proxy certificates if the user&rsquo;s default profile directory is not being used. If you use this keyword, you must enter it in a line that occurs below the user-mode keyword line. The option value is the alternative path.</td>
</tr>

<tr>
<td>ldap-host</td>
<td>Used only when value for user-mode keyword is ldap. <br> <br> Sets the host computer that is running ldap. If you use this keyword, you must enter it in a line that occurs below the user-mode keyword line.</td>
</tr>

<tr>
<td>ldap-bind-dn</td>
<td>Used only when value for user-mode keyword is ldap. <br> <br> Sets a user DN to bind to. If you use this keyword, you must enter it in a line that occurs below the user-mode keyword line.</td>
</tr>

<tr>
<td>ldap-bind-password</td>
<td>Used only when value for user-mode keyword is ldap. <br> <br> Sets a user password. If you use this keyword, you must enter it in a line that occurs below the user-mode keyword line.</td>
</tr>

<tr>
<td>ldap-search-root</td>
<td>Used only when value for user-mode keyword is ldap. <br> <br> Specifies the DN of the directory container object where searches should begin. If you use this keyword, you must enter it in a line that occurs below the user-mode keyword line.</td>
</tr>

<tr>
<td>ldap-search-class</td>
<td>Used only when value for user-mode keyword is ldap. <br> <br> Specifies object class that the user object must be. If you use this keyword, you must enter it in a line that occurs below the user-mode keyword line.</td>
</tr>

<tr>
<td>ldap-search-scope</td>
<td>Used only when value for user-mode keyword is ldap. <br> <br> Sets the scope of user searches. If you use this keyword, you must enter it in a line that occurs below the user-mode keyword line.</td>
</tr>

<tr>
<td>ldap-naming-attr</td>
<td>Used only when value for user-mode keyword is ldap. <br> <br> Sets the attribute on the user object that must exactly match the Windows user ID. If you use this keyword, you must enter it in a line that occurs below the user-mode keyword line.</td>
</tr>

<tr>
<td>ldap-uid-attr</td>
<td>Used only when value for user-mode keyword is ldap.<br> <br> Specifies the attributes with store the OrangeFS UID. If you use this keyword, you must enter it in a line that occurs below the user-mode keyword line.</td>
</tr>

<tr>
<td>ldap-gid-attr</td>
<td>Used only when value for user-mode keyword is ldap. <br> <br> Specifies the attributes with store the OrangeFS GID. If you use this keyword, you must enter it in a line that occurs below the user-mode keyword line.</td>
</tr>

<tr>
<td>new-file-perms</td>
<td>Specifies the permissions mask that new OrangeFS files will have.</td>
</tr>

<tr>
<td>new-dir-perms</td>
<td>Specifies the permissions mask that new OrangeFS directories will have.</td>
</tr>

<tr>
<td>debug</td>
<td>Specifies for all client-related messages to be logged in orangefs.log.</td>
</tr>

<tr>
<td>debug-file</td>
<td>Sets a custom name and location of the log file to be used for debugging (in place of orangefs.log).</td>
</tr>

<tr>
<td>debug-stderr</td>
<td>Sets all debugging messages to print to console. Works only when the executable, orangefs-client, is running (rather than the service).</td>
</tr>
</tbody>
</table>

<h2 id="configuring-the-client-security-mode">Configuring the Client Security Mode</h2>

<p><strong>A</strong>n OrangeFS installation operates in one of three security modes:
default, key- and certificate-based (see <a href="Preview_Security.htm">Preview
Security</a>). You must configure the Client’s
security mode to match that of the servers or it cannot access the file
system.</p>

<p><strong>Note     </strong>The “certificate” security mode is distinct from the
“certificate” user-mapping mode.</p>

<p>The security mode is specified by the security-mode keyword in
orangefs.cfg (see above). Its value is one of default, key and
certificate. (The default value is default.)</p>

<h3 id="configuring-the-client-for-default-security">Configuring the Client for Default Security</h3>

<p>This mode offers checking file object permissions (i.e. read, write and
execute) against the owner&rsquo;s identity but does not prevent user
impersonation. You may use any user-mapping mode with this security
mode, which requires no further configuration.</p>

<h3 id="configuring-the-client-for-key-based-security">Configuring the Client for Key-Based Security</h3>

<p>In this mode, each client and server has a key pair consisting of a
public key and a private key. Public keys are stored in a server-side
file known as the keystore, while each client or server stores its
private key in a protected file. See <a href="Setup_Security_(Build).htm">Set Up
Security</a> for instructions for generating
key pairs. The generated private key for the client should be
transferred to the client’s local file system.</p>

<p>In key mode, the key-file keyword in orangefs.cfg must be present and
must specify the absolute path to the private key file.</p>

<p>Example:</p>

<p>key-file C:\OrangeFS\Client\orangefs-key.pem</p>

<p><strong>Note     </strong>You should protect this file using Windows security so that
it cannot be accessed by non-administrative accounts.</p>

<p>The client’s public key must be stored in the keystore on each server as
normal.</p>

<h3 id="configuring-the-client-for-certificate-based-security">Configuring the Client for Certificate-Based Security</h3>

<p>In this mode, each user has a certificate which stores identifying
information and their public key. A private key corresponds to the
public key, with the certificate and private key being stored in
separate files on the local (or user-shared) file system.</p>

<p>The key-file and cert-file keywords in orangefs.cfg specify absolute
paths to these files. However, because each pair of files is
user-specific, use the %USERNAME% token to specify how the path is
formed.</p>

<p>Example:</p>

<p>key-file C:\Users\%USERNAME%\orangefs-cert-key.pem<br />
 cert-file C:\Users\%USERNAME%\orangefs-cert.pem</p>

<p>Additionally, a certificate and private key must be obtained for the
SYSTEM user which performs basic OrangeFS operations such as retrieving
the disk space. You must place these files in the same directory as
orangefs-client.exe, C:\OrangeFS\Client by default. (See<a href="WinClient_Admin.htm#Using_the_orangefs-get-user-cert_App">Using the
orangefs-get-user-cert
App</a> below.)</p>

<p>Users can generate their own certificates and private keys using the
orangefs-get-user-cert app.</p>

<p>Users must not be able to read other users’ private keys, so you should
protect them using Windows security. Users who do not have a certificate
receive an “access denied” message when attempting to access OrangeFS.</p>

<p>User-mapping is done on the server for this mode, so the user-mapping
mode must be “server”.</p>

<h3 id="using-the-orangefs-get-user-cert-app">Using the orangefs-get-user-cert App</h3>

<p>An OrangeFS installation may have a dynamic pool of users who need
access to files. Having an administrator generate credentials for every
user request would be a needless waste of time. Instead, users can use
the orangefs-get-user-cert app to create a private key and retrieve a
certificate from the server.</p>

<p>First, users must have and know their OrangeFS user name and password;
these correspond to their identity stored in the server-side LDAP
directory. It is convenient to make them match their Windows
credentials, but not necessary.</p>

<p>Then they may run the orangefs-get-user-cert app from the client. The
executable is in C:\OrangeFS\Client. You may create a shortcut to it.</p>

<p>Users will first be prompted for their OrangeFS user name, with their
Windows user name given as a default. Then they’re prompted for their
password. If these are entered correctly, their credential files are
stored in the directory specified by orangefs.cfg (typically their
profile directory).</p>

<p>Additionally, an administrator can create a certificate for the SYSTEM
user by specifying the -s option when running the app. The OrangeFS user
name is typically root (UID 0), but can be any OrangeFS user.</p>

<p>Below is the full usage of the app:</p>

<p>orangefs-get-user-cert [-h|&ndash;help] [options&hellip;] [username]</p>

<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>-s  <br> &ndash;system</td>
<td>generates files for the SYSTEM user</td>
</tr>

<tr>
<td>-c <em>path</em> <br>  &ndash;certfile=<em>path</em></td>
<td>full path for certificate file storage (overrides orangefs.cfg)</td>
</tr>

<tr>
<td>-k <em>path</em> <br> &ndash;keyfile=<em>path</em></td>
<td>full path for private key file storage (overrides orangefs.cfg)</td>
</tr>

<tr>
<td>-x <em>days</em> <br> &ndash;expiration=<em>days</em></td>
<td>expiration time days (default set in server configuration file)</td>
</tr>
</tbody>
</table>

<h2 id="user-mapping">User Mapping</h2>

<p>The Windows Client maps Windows user IDs to OrangeFS Linux/UNIX-based
UIDs for authentication. The user-mode keyword in orangefs.cfg specifies
the type of user mapping. There are three modes of user mapping,
detailed below.</p>

<h3 id="list-mode">List Mode</h3>

<p>This simple form of mapping allows you to list Windows user IDs and
their corresponding OrangeFS UIDs and primary GIDs. The list is created
in orangefs.cfg. Here is the format of each line:</p>

<p>user <em>windows_userid</em> <em>uid</em>:<em>gid</em></p>

<p>Example:</p>

<p>user ofsuser 500:100</p>

<p>A separate line entry with the user keyword is required for each user.
Each time you use this keyword, you must enter it in a line that occurs
below the user-mode keyword line.</p>

<p>File operations originating from the specified Windows user ID will be
carried out on OrangeFS as the specified UID.</p>

<h3 id="certificate-mode">Certificate Mode</h3>

<p>This section includes:</p>

<ul>
<li>A summary of the currently supported approach to certificate mapping
for the Windows Client, including the supported software package for
implementing this approach</li>
<li>The three types of certificates that must be in place before
configuring the Windows Client for certificate mapping</li>
<li>The configuration settings for certificate mapping that can be set
in orangefs.cfg, either during installation or manually</li>
</ul>

<p><strong>Important  </strong>This topic <em>does not</em> discuss how to create certificates.
For details on the mechanics of generating certificates, see <a href="#Notes_on_Installing_Globus_Toolkit">Notes on
Installing and Using Globus
Toolkit</a> later in this topic.</p>

<h4 id="certificates-for-grid-computing">Certificates for Grid-Computing</h4>

<p>With OrangeFS, certificates for user mapping and security are often
associated with grid computing. Therefore, the OrangeFS team chose to
support the certificate generation capabilities of Globus Toolkit (an
open source utilities package for grid computing) in its early
implementation of the Windows Client.</p>

<p>Specifically, the Globus Toolkit components used to generate
certificates for the Windows Client are MyProxy and SimpleCA.</p>

<p>If you select the certificate mode for user mapping, the certificates
must already have been generated and placed in their appropriate
locations. For more information on meeting these certificate
requirements for Windows Client, see <a href="#Notes_on_Installing_Globus_Toolkit">Notes on Installing and Using
Globus Toolkit</a> below.</p>

<p>Future releases of the Windows Client will address alternatives to
Globus Toolkit. Until then, if you wish to implement a certificate
solution other than the one used here, please contact Technical Support.</p>

<h4 id="certificate-requirements">Certificate Requirements</h4>

<p>The Client uses X.509 certificates to identify users. The certificates
contain the UID and GID to be used on the OrangeFS server. Because
OrangeFS currently expects trusted clients, the certificates <em>do not
provide true security</em>. However, they will limit the actions of typical
users, such as preventing deleting files they do not own. Note that
support for untrusted clients will be added to OrangeFS in an upcoming
release.</p>

<p>Three types of certificates must be in place for the Windows Client:</p>

<ul>
<li>CA (certificate authority)</li>
<li>Proxy</li>
<li>User</li>
</ul>

<p> </p>

<p>The following table describes each type.</p>

<hr />

<p>Type    Example Name          Default Location on Windows Client   Default Location on Globus Toolkit System</p>

<p>CA      cacert.pem            C:\OrangeFS\Client\CA             <em>home</em>/.globus/cacert.pem <br />
                                                                     &hellip;where <em>home</em> is the home directory of the user who installed SimpleCA (typically root).</p>

<p>Proxy   cert.0                C:\Users\<em>userid</em>                  /tmp/x509up_u250 <br />
                                                                     &hellip;for UID 250</p>

<p>User    cert.1, cert.2, &hellip;   C:\Users\<em>userid</em>                  <em>home</em>/.globus/cacert.pem <br />
                                                                     &hellip;where <em>home</em> is the home directory of the user who installed SimpleCA (typically root).</p>

<hr />

<h4 id="configuration-file">Configuration File</h4>

<p>Two configuration file keywords are associated with the certificate mode
for user mapping: ca-path and cert-dir-prefix.</p>

<p>To store the CA certificate in a non-default location on the Windows
Client, you can add a line entry to orangefs.cfg that begins with the
ca-path keyword, followed by the custom path.</p>

<p>Example:</p>

<p><em>ca-path</em> C:\Certificates\OrangeFS\CA</p>

<p>To store the user and proxy certificates in a non-default location on
the Windows Client, you can add a line entry to orangefs.cfg that begins
with the cert-dir-prefix keyword, followed by a prefix directory path to
be placed in front of the certificate user directory.</p>

<p>Example:</p>

<p>cert-dir-prefix C:\Certificates\OrangeFS</p>

<p>When the Client attempts to locate the proxy and user certificates for a
user, it will append the <em>userid</em> as a directory name to the
cert-dir-prefix. Using the above example, the certificates for user
bsmith would be placed in C:\Certificates\OrangeFS\bsmith\ using the
cert-dir-prefix above.</p>

<h3 id="ldap-mode">LDAP Mode</h3>

<p>LDAP (Lightweight Directory Access Protocol) mapping allows the Windows
user ID to be looked up in an identity directory that supports LDAP.
LDAP directory examples include Microsoft Windows Active Directory and
Novell* eDirectory. Consult your directory documentation for
information on LDAP.</p>

<p>LDAP options for the Windows Client are specified in orangefs.cfg. All
keywords described in this section must occur below user-mode ldap line
entry.</p>

<h4 id="connecting-over-ldap">Connecting over LDAP</h4>

<p>First you must specify the host computer running LDAP. This is done with
the ldap-host keyword in the following format:</p>

<p>ldap-host ldap[s]://<em>hostname</em>:<em>port</em></p>

<p>If ldaps is specified, a secure connection is used; otherwise, the
connection is plain text. The default secure port is 636, and the
default plain text port is 389, but you can alter the port as shown
above.</p>

<p>Example:</p>

<p>ldap-host ldaps://myldaphost.acme.com:1636</p>

<p>You can bind to the directory anonymously if it allows, or you can
specify a user and password with the ldap-bind-dn and ldap-bind-password
keywords:</p>

<p>ldap-bind-dn <em>bind_user_dn</em> (login)<br />
 ldap-bind-password <em>password</em></p>

<p>Example:</p>

<p>ldap-bind-dn cn=orangefs-user,ou=special,o=acme<br />
 ldap-bind-password S3crt!</p>

<p>Because the password is stored in plain text in the configuration file,
give the binding user minimal rights to the directory. For more
information, see <a href="#LDAP_Security">LDAP Security</a> below.</p>

<h4 id="search-options">Search Options</h4>

<p>The Windows Client will search LDAP for the Windows user ID making the
file system request. The search options specify how the directory is
searched.</p>

<p>First, the ldap-search-root keyword specifies the DN of the directory
container object where the search should begin.</p>

<p>Example:</p>

<p>ldap-search-root ou=cluster-users,o=acme</p>

<p>The ldap-search-scope keyword can be either onelevel or subtree. If
onelevel is specified, only the object specified with ldap-search-root
is searched—no descendant objects (sub-containers) are searched. If
subtree is specified, the object specified with ldap-search-root is
searched along with all descendant objects. The default is onelevel.</p>

<p>Example:</p>

<p>ldap-search-root subtree</p>

<p>The Client will form an LDAP search string in the following form:</p>

<p>(&amp;(objectClass=<em>ldap-search-class</em>)(<em>ldap-naming-attr</em>=<em>windows_userid</em>))</p>

<p>The ldap-search-class keyword specifies the required object class of the
user object. Typical values are User or inetOrgPerson.</p>

<p>Example:</p>

<p>ldap-search-class User</p>

<p>The ldap-naming-attr keyword indicates the attribute on the user object
that must exactly match the Windows user ID. Consult your documentation
to determine if the comparison is case-sensitive (typically it is not).
Typical values might be cn or name.</p>

<p>Example:</p>

<p>ldap-naming-attr cn</p>

<p> </p>

<h4 id="attribute-options">Attribute Options</h4>

<p>The ldap-uid-attr and ldap-gid-attr keywords specify the attributes
which store the OrangeFS UID and primary GID, respectively. The Windows
Client retrieves these values for use on the file system.</p>

<p>Example:</p>

<p>ldap-uid-attr <em>uidNumber</em><br />
 ldap-gid-attr <em>gidNumber</em></p>

<h4 id="ldap-security">LDAP Security</h4>

<p>Because the LDAP binding password is stored as plain text, give the
binding user minimal rights to the LDAP directory. Alternatively,
minimal rights can be given to users who bind anonymously—no password is
stored in this case. Here are rights to consider:</p>

<ul>
<li>Rights to search objects in the search root and below</li>
<li>Rights to read the object class, naming attribute, UID attribute and
GID attribute from searchable objects</li>
<li>No write/delete/administrator rights</li>
</ul>

<p>For performance, UID/GID credentials are cached for a time after lookup.
If you need to revoke rights, you must restart the OrangeFS Client
service.</p>

<p>You should also use an encrypted connection to LDAP if possible, by
specifying ldaps in the host URI.</p>

<h2 id="notes-on-installing-globus-toolkit">Notes on Installing Globus Toolkit</h2>

<p>This section provides supplementary information about Globus Toolkit.
The information applies only to Windows Clients that use the certificate
mode for user mapping.</p>

<p>With OrangeFS, certificates for user mapping and security are often
associated with grid computing. Therefore, the OrangeFS team chose to
support the certificate generation capabilities of Globus Toolkit (an
open source utilities package for grid computing) in its early
implementation of the Windows Client.</p>

<p><strong>Note     </strong>Future releases will accommodate alternatives to the Globus
Toolkit approach. Until then, if you wish to implement a certificate
solution other than the one described here, please contact <a href="Technical_Support.htm">Technical
Support</a>.  </p>

<p>Whether you are new to Globus Toolkit or you have already installed it
for certificate generation, the guidelines and suggestions in this
section ensure optimal certificate configuration for the Windows Client.</p>

<h3 id="introduction">Introduction</h3>

<p>The Client can use X.509 certificates to identify users. The
certificates contain the UID and GID to be used on the OrangeFS server.
Because OrangeFS currently expects trusted clients, the certificates <em>do
not provide true security</em>. However, they will restrict the actions of
typical users, such as deleting files they do not own. Note that support
for untrusted clients will be added to OrangeFS in an upcoming release.</p>

<h4 id="identifying-certificate-format">Identifying Certificate Format</h4>

<p>The certificate that identifies the OrangeFS user is called the
identifying certificate. It is a proxy certificate, which allows
authorization on behalf of an “end entity,” in this case, a user. This
user is represented by a user certificate.</p>

<p>Proxy certificates contain authorization information in a data field
known as a policy. For the Client, the policy is a UTF-8 string in the
form <em>uid</em>/<em>gid</em>. For example, with OpenSSL, the proxy specification for
UID 250 and primary GID 100 would be as follows:</p>

<p>language=id-ppl-anyLanguage<br />
 pathlen=0<br />
 policy=text:<sup>250</sup>&frasl;<sub>100</sub></p>

<p>More information on generating this certificate is provided below.</p>

<h4 id="certificates-and-validation">Certificates and Validation</h4>

<p>The identifying certificate is useful only if it can be validated
against its signing certificate. The signing certificate might also
require validation against the certificate that signed it, and so on,
forming a certificate chain. Ultimately, the chain must end at the
trusted, self-signed certificate of a certificate authority (CA).</p>

<h3 id="installing-globus-toolkit">Installing Globus Toolkit</h3>

<p>Install Globus Toolkit on one of the OrangeFS servers or another Linux
system that shares the same user information (UIDs/GIDs).</p>

<p>Installation instructions for Globus Toolkit can be obtained at
<a href="http://www.globus.org/toolkit/docs/latest-stable/">http://www.globus.org/toolkit/docs/latest-stable/</a>.
The <em>Quickstart</em> instructions will provide a default configuration for
MyProxy, including a CA called SimpleCA.</p>

<p>Many different security options can be configured. For example, a
third-party certificate authority can be used. As long as the
identifying certificate follows the format above, the client will accept
the certificate.</p>

<h3 id="locating-the-ca-certificate">Locating the CA Certificate</h3>

<p>If SimpleCA is being used, the default CA certificate is
<em>home</em>/.globus/cacert.pem, where <em>home</em> is the home directory of the
user who installed SimpleCA, typically root. If a third-party CA is
being used, the certificate will be located in an
implementation-dependent location. The security administrator of the
grid should be able to locate the file.</p>

<p>The CA certificate must be copied to the Windows Client system after the
Client is installed. For the file location, see <a href="#Client_Certificate_Locations">Client Certificate
Locations</a> below.</p>

<h3 id="using-grid-based-certification">Using Grid-Based Certification</h3>

<p>To use grid-based certification, the user must first have a user
certificate. To obtain this certificate, the user runs grid-cert-request
to generate a certificate request file. At that time, the user specifies
the certificate pass phrase. This file is then delivered to the CA
organization, where a human agent will review the request and return a
user certificate signed by the CA certificate. The certificate will be
stored in home/.globus/usercert.pem, where <em>home</em> is the home directory
of the user who installed SimpleCA, typically root. If the grid
installation is using SimpleCA, the certificate request can be processed
by a local administrator using the grid-ca-sign command.</p>

<p>The grid-proxy-init command can then be used to obtain a proxy
certificate. Create a file (cert-policy, for example) to contain the
policy text, which is formatted <em>uid</em>/<em>gid</em>. For example, the file would
contain <sup>250</sup>&frasl;<sub>100</sub> for a user with UID 250 and GID 100. The grid-proxy-init
command can be used to generate the proxy certificate with the example
cert-policy file, as follows:</p>

<p>grid-proxy-init -policy cert-policy -pl id-ppl-anyLanguage</p>

<p>When the user enters the certificate pass phrase, the proxy certificate
is generated.</p>

<p>To simplify this command, the OrangeFS installation package includes the
script Tools\pvfs2-grid-proxy-init.sh. This will generate the policy
file and run grid-proxy-init.</p>

<p>The resulting proxy certificate is stored by default at
/tmp/x509up_u<em>uid</em>. Example for UID 250: /tmp/x509up_u250</p>

<p>Transfer this certificate to the Windows Client system, along with the
user certificate. For the file location, see <a href="#Client_Certificate_Locations">Client Certificate
Locations</a> below. The proxy certificate
must be renamed cert.0, and the user certificate cert.1.</p>

<h3 id="delegating-identities-for-clusters">Delegating Identities for Clusters</h3>

<p>The use of identifying proxy certificates allows the identity of the
user to be separated from the actual Windows user ID making a file
system request. This ability is useful for clusters.</p>

<p>For example, when a user with a Windows user ID of JSmith executes a job
on a cluster node, the job scheduler uses Windows user ID ClusterUser.</p>

<p>The system administrator would set the certificate directory prefix to
C:\ClusterWork. A directory called ClusterUser would be created under
ClusterWork. The job scheduler would transfer certificates to the
C:\ClusterWork\ClusterUser directory. When ClusterUser makes file
system requests, it will use the certificates of JSmith, so requests on
the file system will use the UID of JSmith. When a different user uses
the node, that user’s certificates will be used.</p>

<h3 id="certificate-expiration-and-renewal">Certificate Expiration and Renewal</h3>

<p>For performance, the Client caches the OrangeFS user identity (UID/GID)
until the proxy certificate expires.</p>

<p>By default, Globus Toolkit proxy certificates expire after 12 hours. If
jobs requiring more time are expected, a means for the user to renew the
certificate should be provided.</p>

<p>One way to do this is to have the user to run grid-proxy-init again.
This will overwrite the current proxy. Then the new proxy certificate
can be transferred to the Client system (overwriting the current
certificate) without interrupting the current job.</p>

<h3 id="client-certificate-locations">Client Certificate Locations</h3>

<p>The certificates are stored as PEM-format files on the Windows Client
system. The identifying certificate’s name is cert.0. Because the
identifying certificate is associated with a Windows user, it is stored
in its user’s profile directory by default. On most systems this is
C:\Users\.</p>

<p>Example:  C:\Users\jsmith</p>

<p>Alternatively, you can specify a certificate prefix directory in the
client configuration file, C:\OrangeFS\Client\orangefs.cfg by
default. Use the cert-dir-prefix keyword to specify this directory. The
user’s <em>userid</em> will be appended as a directory name to the prefix
directory.</p>

<p>Example configuration file line entry:</p>

<p>cert-dir-prefix M:\OrangeFS Users</p>

<p>For user jsmith, the identifying certificate will be M:\OrangeFS
Users\jsmith\cert.0.</p>

<p>The identifying certificate must be verified by its end-entity
(sometimes called a user) certificate. Place this certificate in the
same directory as the identifying certificate, with the name cert.1.
Additional intermediate certificates can be placed in the same directory
with names cert.2, cert.3, and so on.</p>

<p>The CA certificate is placed in the OrangeFS CA directory with the name
cacert.pem. By default this is C:\OrangeFS\Client\CA\cacert.pem.
This path can be changed in the configuration file using the ca-path
directive in the configuration file.</p>

<p>Example:</p>

<p><em>ca-path</em> M:\OrangeFS Certificates\orangefs-cacert.pem</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<p>To troubleshoot problems, check the Application Event Log in the Event
Viewer utility. You can also turn on detailed debugging (see
<a href="#Working_With_the_orangefs.cfg_File">Working_With_The_orangefs.cfg_File</a>).</p>

<p>Startup errors are logged to the Windows Event Log.</p>

<p>The configuration file has some strict requirements, so the Windows
Client will log an error to Event Log and exit if there is a problem.
The event message should give an exact explanation of the problem with
the configuration file. Correct the problem and restart the OrangeFS
Client service.</p>

<p>ensure network connectivity is available between the Client system and
the server(s) hosting OrangeFS. Check firewall settings and network
access lists.</p>

<p>For information about the debug and related keywords, see
<a href="#Configuration">Configuration</a>. You can use the generated file
orangefs.log to diagnose problems. A file named service.log is also
created in the installation directory when debugging is enabled and can
provide more detail on startup errors.</p>

<p>Note that many debug messages are low-level and require extensive
knowledge of OrangeFS/PVFS2 to interpret. For more information, consult
the OrangeFS and PVFS2 system documentation.</p>

<p>Free and commercial support is available at
<a href="http://www.orangefs.org">http://www.orangefs.org</a>.</p>

<h2 id="source-code">Source Code</h2>

<p>The OrangeFS team intends to provide all source code needed for building
the Client.</p>

<p>Currently, a source code package is available at
<a href="http://www.orangefs.org">http://www.orangefs.org</a>. (The Windows package
is separate from the Linux/UNIX package.) Build instructions will be
released at a later date.</p>

<p> </p>

<p> </p>

<p> </p>


    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/windows-client/winclient_use/" title="Using the Client"> <i class="fa fa-chevron-left"></i><label>Using the Client</label></a>
    <a class="nav nav-next" href="/configuration/" title="OrangeFS Configuration" style="margin-right: 0px;"><label>OrangeFS Configuration</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  


	<div>


  
    <div id="image-table">
    <table>
        <tr>
              <td style="padding:1px">
              <a href="http://orangefs.com"> <img src="/OrangeFS_logo.gif" alt="OrangeFS" style="width:200px"></a>
            </td>
        </tr>
    </table>
</div>

  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>


<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script src="/theme-flex/script.js"></script>

    

    
    

    
  </body>
</html>