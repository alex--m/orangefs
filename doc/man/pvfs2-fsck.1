.\" Process this file with
.\" groff -man -Tascii foo.1
.TH "PVFS2-FSCK" "1" "SEPTEMBER 2011" "PVFS2" "PVFS2 MANUALS"
.SH "NAME"
pvfs2\-fsck \- Validate and repair a PVFS2 file system.
.SH "SYNOPSIS"
.B pvfs2\-fsck
.I [OPTIONS] \-m mount_point
.SH "DESCRIPTION"
Display information about or repair the contents of the PVFS2 file system located at
.I mount_point.
If an orphaned file is found and is salvagable, then it will be moved to the
lost+found directory at the root of the filesystem. Any object that is found
and is not referenced by a sub\-tree or an orphaned file will be removed. 
This utility will not run in admin mode. See pvfs2\-set\-mode(1) for more information.
.LP 
The actual checking and repair of the filesystem is done in four stages.
The first pass cleans up any directories that refer to missing objects.
Verifies that files in the tree have have all their datafiles, and that all
directories have their dirdata. The second pass finds all the orpaned sub trees
and varifies the consistancy of the files and directories. A list of dirdata,
datafiles, and metadata not referenced in some sub tree is created. The third
stage moves sub trees into the /lost+found directory. Then it builds a list of
remaining dirdata and datafiles not referenced in a sub tree or orphaned file.
The final stage removes orpahned dirdata and datafiles left over from the
previous passes.
.SH "OPTIONS"
.IP \-V
Print the PVFS2 version and exit.
.IP \-v
Verbose operation
.IP \-n
Answer no to all questions
.IP \-y
Answer yes to all questions
.IP \-p
Automatically repair with no questions asked.
.IP \-a
same as \-p
.SH "ENVIRONMENT"
.IP PVFS2TAB_FILE
If set, the full pathname for an alternate 
.I R pvfs2tab
file

.SH "BUGS"
Please report all bugs to the pvfs2 bugzilla (http://bugzilla.mcs.anl.gov/pvfs/)
.SH "AUTHOR"
The PVFS2 development team (pvfs2\-developers@beowulf\-underground.org)
.SH "SEE ALSO"
pvfs2\-statfs(1)
pvfs2\-set\-mode(1)
